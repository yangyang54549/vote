<!DOCTYPE html>
<html class="ui-page-login">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>注册</title>
		<link rel="stylesheet" type="text/css" href="__WEB__/css/border.css"/>
		<link href="__WEB__/css/mui.css" rel="stylesheet" />
		<link href="__WEB__/css/style.css" rel="stylesheet" />

		<style>
			header>.div {

				position: absolute;
				top: 15px;
				left: 15px;
				transform: rotate(45deg);
				-ms-transform: rotate(45deg);
				/* IE 9 */
				-moz-transform: rotate(45deg);
				/* Firefox */
				-webkit-transform: rotate(45deg);
				/* Safari 和 Chrome */
				-o-transform: rotate(45deg);
				/* Opera */
				width: 13px;
				height: 13px;
				border-bottom: 2px solid #007aff;
				border-left: 2px solid #007aff;
				z-index: 100;
			}
			.area {
				margin: 20px auto 0px auto;
			}
			.mui-input-group:first-child {
				margin-top: 20px;
			}
			.mui-input-group label {
				width: 35%;
			}
			.mui-input-row label~input,
			.mui-input-row label~select,
			.mui-input-row label~textarea {
				width: 65%;
			}
			.mui-checkbox input[type=checkbox],
			.mui-radio input[type=radio] {
				top: 6px;
			}
			.mui-content-padded {
				margin-top: 25px;
			}
			.mui-btn {
				padding: 10px;
			}
			.mui-input-rows{
				position: relative;
			}
			.mui-input-rows #wait{
				position: absolute;
				top: 5px;
				right: 10px;
				height: 30px;
				width: 70px;
				text-align: center;
				z-index: 100;
				background-color: #007aff;
				color: white;
				padding: 0;
				border-radius:10px ;
				line-height: 30px;
				    font-size: 12px;
			}

.mui-input-row label,.mui-input-row input{
	font-family: kaiti;
}
#mui_sheng{
				position: fixed;
   				left: 0;
   				top: 0;
   				box-sizing:border-box;
				width: 102vw;
				height: 100vh;
				overflow:auto;
				padding: 0px;
				padding-top: 50px;
				display: none;
				z-index: 100;
			}
/*作为IT界最前端的技术达人，页面上的每一个元素的样式我们都必须较真，就是滚动条我们也不会忽略。
下面我给大家分享一下如何通过CSS来控制滚动条的样式，代码如下：*/
 /*定义滚动条轨道*/
  #mui_sheng::-webkit-scrollbar-track
    {
        background-color: #ffffff;
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.22);
    }
    /*定义滚动条高宽及背景*/
    #mui_sheng::-webkit-scrollbar
    {
        width: 3px;
        background-color: rgba(255, 255, 255, 0.34);
    }
    /*定义滚动条*/
    #mui_sheng::-webkit-scrollbar-thumb
    {
        background-color: #ffffff;
        border-radius: 2px;
    }
			.mui-table-view-cell:after {
				opacity: 0;
			}

			.mui-table-view-cell {
				border-bottom: 1px solid #c8c7cc;
			}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" style="z-index: 150;">
			<div class="div" onclick="window.history.back()"></div>
			<h1 class="mui-title">注册</h1>
		</header>
		<div class="mui-content">
			<form class="mui-input-group" style="margin: 10px;">
				<div class="mui-input-row">
					<label>昵称</label>
					<input id='names' type="text" class="mui-input-clear mui-input" placeholder="请输入昵称" maxlength="15">
				</div>

				<div class="mui-input-row mui-input-rows">
					<label>手机号</label>
					<input id='phone' type="number" class="mui-input-clear mui-input" placeholder="请输入手机号" oninput="if(value.length>11)value=value.slice(0,11)">
					<!--<p>获取验证码</p>-->
					<input type="button" name="" id="wait" value="获取验证码" />
				</div>
				<div class="mui-input-row">
					<label>短信验证</label>
					<input id='yanz' type="number" class="mui-input-clear mui-input" placeholder="请输入短信验证码" oninput="if(value.length>6)value=value.slice(0,6)">
				</div>
				<div class="mui-input-row">
					<label>姓名</label>
					<input id='name' type="text" class="mui-input-clear mui-input" placeholder="请输入姓名" maxlength="10">
				</div>
				<div class="mui-input-row">
					<label>身份证号</label>
					<input id='identity' type="tel" class="mui-input-clear mui-input" placeholder="请输入身份证号" maxlength="18">
				</div>
				<div class="mui-input-row">
					<label>选择省份</label>
					<!--<input id='identity' type="tel" class="mui-input-clear mui-input" placeholder="请输入身份证号" maxlength="18">-->
					<input type="text"  id="sheng"  value="" placeholder="选择省份"  readOnly='readOnly' />
				</div>
				<!--<p class="mui-col-sm-12 mui-col-xs-12 muip">选择省份</p>
							<input type="text" name="leixing" id="sheng" value="" placeholder="选择省份" style="margin: 10px 0;" readOnly='readOnly' />-->
				<div class="mui-input-row">
					<label>设置密码</label>
					<input id='password' type="password" class="mui-input-clear mui-input" placeholder="请输入密码" maxlength="16">
				</div>
				<div class="mui-input-row">
					<label>确认密码</label>
					<input id='password_confirm' type="password" class="mui-input-clear mui-input" placeholder="请确认密码" maxlength="16">
				</div>
				<input id='referrer' type="hidden" name="referrer" value="{$referrer ?? 0}">
				<!--<div class="mui-input-row">
					<label>邮箱</label>
					<input id='email' type="email" class="mui-input-clear mui-input" placeholder="请输入邮箱">
				</div>-->
			</form>
			<p style="margin: 10px;">注册需支付100积分(1元)，注册后将会充值进您的账户余额中</p>
			<div class="mui-content-padded" style="margin: 10px;">
				<button id='reg' class=" mui-btn-primary" style="width: 100%; ">注册</button>
				<button id='regs' class="mui-btn-primary" style="margin: 10px  0px;">返回登录</button>
			</div>
			<div class="mui-content-padded">
				<!--<p>注册真实可用，注册成功后的用户可用于登录，但是示例程序并未和服务端交互，用户相关数据仅存储于本地。</p>-->
			</div>

		</div>
		<ul class="mui-table-view" id="mui_sheng">
<!-- 							<li class="mui-table-view-cell">北京市</li>
							<li class="mui-table-view-cell">上海市</li>
							<li class="mui-table-view-cell">重庆市</li> -->
							<li class="mui-table-view-cell">黑龙江省</li>
							<li class="mui-table-view-cell">辽宁省</li>
							<li class="mui-table-view-cell">吉林省</li>
							<li class="mui-table-view-cell">河北省</li>
							<li class="mui-table-view-cell">河南省</li>

							<li class="mui-table-view-cell">湖北省</li>
							<li class="mui-table-view-cell">湖南省</li>
							<li class="mui-table-view-cell">山东省</li>
							<li class="mui-table-view-cell">山西省</li>
							<li class="mui-table-view-cell">陕西省</li>
							<li class="mui-table-view-cell">安徽省</li>
							<li class="mui-table-view-cell">浙江省</li>
							<li class="mui-table-view-cell">江苏省</li>

							<li class="mui-table-view-cell">福建省</li>
							<li class="mui-table-view-cell">广东省</li>
							<li class="mui-table-view-cell">海南省</li>

							<li class="mui-table-view-cell">四川省</li>
							<li class="mui-table-view-cell">云南省</li>

							<li class="mui-table-view-cell">贵州省</li>
							<li class="mui-table-view-cell">青海省</li>
							<li class="mui-table-view-cell">甘肃省</li>
							<li class="mui-table-view-cell">江西省</li>
							<li class="mui-table-view-cell">台湾省</li>
							<li class="mui-table-view-cell">内蒙古自治区</li>
							<li class="mui-table-view-cell">宁夏回族自治区</li>
							<li class="mui-table-view-cell">新疆维吾尔自治区</li>
							<li class="mui-table-view-cell">西藏自治区</li>
							<li class="mui-table-view-cell">广西壮族自治区</li>
<!-- 							<li class="mui-table-view-cell">香港特别行政区</li>
							<li class="mui-table-view-cell">澳门特别行政区</li> -->
							<input type="hidden" name="" id="mui_shengs" value="" />
						</ul>
		<script src="__WEB__/js/mui.min.js"></script>
		<!-- <script src="__WEB__/js/jquery.js"></script> -->

		<!-- <script src="__WEB__/js/mui.enterfocus.js"></script> -->
		<!-- <script src="__WEB__/js/app.js"></script> -->
		<script src="__WEB__/js/script.js" type="text/javascript" charset="utf-8"></script>
		<script>
			mui.init();
			(function($) {
				$(".mui-scroll-wrapper").scroll({
					//bounce: false,//滚动条是否有弹力默认是true
					//indicators: false, //是否显示滚动条,默认是true
				});
			})(mui);
			mui(".mui-input-row").on("tap", "#sheng", function() {
				document.getElementById("mui_sheng").style.display = "block";

			})
			mui("#mui_sheng").on("tap", "#mui_sheng li", function() {
				document.getElementById("sheng").value = this.innerText;
				document.getElementById("mui_shengs").value = this.innerText;
				document.getElementById("mui_sheng").style.display = "none";

			})
			mui(".mui-input-rows").on("tap", "#wait", function() {
					var phone = document.getElementById("phone");
				if(!(/^1[3456789]\d{9}$/.test(phone.value))) {
						mui.toast('请重新输入手机号');toasts();
					} else {
						mui.toast('已发送短信');toasts();
						this.value = "60s";
						document.getElementById("wait").disabled = true;
						document.getElementById("wait").style.opacity = "0.9";
						var ss= 60;
								setInterval(function(){

									if(ss==0){

										document.getElementById("wait").value = "重新获取"
											document.getElementById('wait').disabled = false;
									}else{
										ss =ss-1;
										document.getElementById("wait").value = ss+"s"
									}

								},1100);
					}
			})
			mui(".mui-content-padded").on("tap", "#reg", function() {
					var names = document.getElementById("names").value;
					var name = document.getElementById("name");
					var phone = document.getElementById("phone");
					var yanz = document.getElementById("yanz");
					var identity = document.getElementById("identity");
					var password1 = document.getElementById("password");
					var password2 = document.getElementById("password_confirm");

					var sheng = document.getElementById("sheng");
					if(names.value !=""||names.value.length>3){
						if(name.value !=""||name.value.length>1){
							if(!(/^1[3456789]\d{9}$/.test(phone.value))) {
								mui.toast('手机号错误，请重新输入');toasts();
							} else {
								if(yanz.value.length==6){
									if(identity.value != ""||identity.value.length ==18){
										if(password1.value>6){
											if(password1.value==password2.value){
												//验证完成
												if(sheng.value==""){
													mui.toast('选择省份');toasts();
												}else{


												var names = document.getElementById("names").value;
												var name = document.getElementById("name").value;
												var phone = document.getElementById("phone").value;
												var yanz = document.getElementById("yanz").value;
												var identity = document.getElementById("identity").value;
												var password1 = document.getElementById("password").value;
												var referrer = document.getElementById("referrer").value;
												var shengt = sheng.value;
												mui.post("{:url('login/reg')}",{
													name:names,mobile:phone,yanz:yanz,id_name:name,id_card:identity,password:password1,referrer:referrer,province:shengt
												},function(data){
														//服务器返回响应，根据响应结果，分析是否登录成功；
														if (data.code==1) {
															mui.toast(data.msg);toasts();
															names="";
															phone="";
															yanz="";
															name="";
															identity="";
															password1="";
															referrer="";
															setTimeout(function() { //使用  setTimeout（）方法设定定时2000毫秒
																window.location = "{:url('login/login')}";
															}, 1000);
														}else{
															mui.toast(data.msg);toasts();
														}

													},'json'
												);
												}

											}else{
												mui.toast('确认密码与密码不一致');toasts();
											}
										}else{
											mui.toast('请重新输入密码');toasts();
										}
									}else{
										mui.toast('请输入身份证号');toasts();
									}
								}else{
									mui.toast('请重新输入短信验证码');toasts();
								}
							}
						}else{
							mui.toast('请重新输入姓名');toasts();
						}
					}else{
						mui.toast('请重新输入昵称');toasts();
					}
				/*if(!(/^1[3456789]\d{9}$/.test(phone.value))) {
						mui.toast('手机号错误，请重新输入');
					} else {
						mui.toast('已发送短信');
						this.value = "已发送";
					}*/
			})
		</script>
	</body>

</html>